(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const r of t.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function a(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(e){if(e.ep)return;e.ep=!0;const t=a(e);fetch(e.href,t)}})();function d(s,o,a,i){let e=new google.maps.LatLng(i.lat,i.lon);a.push(e);var t=new google.maps.InfoWindow;let r=new google.maps.Marker({position:e,map:s,visible:!0,title:"Mushroom"});r.addListener("click",function(){t.setContent("<img src="+i.url+">"),t.open(s,r),console.log(r.position.lat(),r.position.lng(),i.url)}),o.push(r)}class f{render({count:o,position:a},i,e){const r=`<svg fill="#0000ff" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".8" r="70" visibility="visible" />
<circle cx="120" cy="120" opacity=".3" r="90" visibility="visible" />
<circle cx="120" cy="120" opacity=".2" r="110" visibility="visible" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">${o}</text>
</svg>`,n=`Cluster of ${o} markers`,c=Number(google.maps.Marker.MAX_ZINDEX)+o;if(markerClusterer.MarkerUtils.isAdvancedMarkerAvailable(e)){const l=new DOMParser().parseFromString(r,"image/svg+xml").documentElement;l.setAttribute("transform","translate(0 25)");const p={map:e,position:a,zIndex:c,title:n,content:l};return new google.maps.marker.AdvancedMarkerElement(p)}const m={position:a,zIndex:c,title:n,icon:{url:`data:image/svg+xml;base64,${btoa(r)}`,anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(m)}}function y(){console.log("DDDD");let s=new google.maps.MVCArray,o=[],i={zoom:4,center:new google.maps.LatLng(60.208067,30.526095),mapTypeId:google.maps.MapTypeId.ROADMAP},e=new google.maps.Map(document.getElementById("map_canvas"),i);var t={apiKey:"AIzaSyDvLeix43yIMGr6bjkG6ccDeiB-e7qDxHc",authDomain:"geomushroom-186520.firebaseapp.com",databaseURL:"https://geomushroom-186520.firebaseio.com",storageBucket:"geomushroom-186520.appspot.com",serviceAccount:"geomushroom-34720f274ce5.json"};firebase.initializeApp(t),firebase.database().ref("mushrooms").once("value",function(c){if(s.clear(),console.log("Retrieved ",c," objects"),o)for(var m in o)o[m].setMap(null);c.forEach(function(p){let g=p.val();d(e,o,s,g)});let u=new f;new markerClusterer.MarkerClusterer({markers:o,map:e,renderer:u});let l=document.createElement("div");l.setAttribute("horizontal",""),l.setAttribute("layout",""),e.controls[google.maps.ControlPosition.TOP_RIGHT].push(l)});let n=new google.maps.visualization.HeatmapLayer({data:s});n.setMap(e),n.set("threshold",10),n.set("radius",30),n.set("opacity",.6),n.set("dissipating",!0)}window.initialize=y;
